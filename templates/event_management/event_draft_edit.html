{% extends 'base.html' %}
{% load static %}
{% load document_templatetags %}
{% block content %}

    <script src="{% static 'js/SiteScripts/search_results.js' %}"></script>
    <script src="/static/js/task_manager.js"></script>

    <style>
        th {
            white-space: normal !important;
            word-wrap: break-word !important;
            font-size: 12px;
            vertical-align: middle;
            text-align: center;
        }
        td {
            word-wrap: break-word;
            font-size: 12px;
            vertical-align: middle;
        }
    </style>

    <div class="row">
        <link href="/static/css/selectize.css" rel="stylesheet"/>
        <script src="/static/js/jquery-3.5.1.min.js"></script>
        <script src="/static/js/task_manager.js"></script>
        <script src="/static/js/selectize.js"></script>

        <div>

            <form action="" method="post" id="event_form" enctype="multipart/form-data">
                {% csrf_token %}

                <fieldset>

                    <div>
                        <h3 style="text-align: center; padding-top: 1%">Edit Event</h3>

                        <div class="outer-wrapper">
                            <div style="padding: 1%">
                                <table class="table table-hover table-bordered table-secondary" style="table-layout: fixed; width: 60%; margin: 0 auto; text-align: center">

                                    {% for field in form %}
                                        <tr>

                                            <td><b> {{ field.label_tag }} </b></td>
                                            <td>
                                                {% if field.name == "supporting_file_1" %}
                                                    <input style="margin-left: 35%" type="file" name="{{ field.name }}" id="{{ field.id_for_label }}" class="form-control-file">
                                                {% elif field.name == "supporting_file_2" %}
                                                    <input style="margin-left: 35%" type="file" name="{{ field.name }}" id="{{ field.id_for_label }}" class="form-control-file">
                                                {% elif field.name == "supporting_file_3" %}
                                                    <input style="margin-left: 35%" type="file" name="{{ field.name }}" id="{{ field.id_for_label }}" class="form-control-file">
                                                {% else %}
                                                    {{ field }}
                                                {% endif %}
                                            </td>
                                        </tr>
                                    {% endfor %}
                                </table>
                            </div>
                        </div>
                        <div id="dialog"
                             style=" z-index: 100; display: none; float: right; right: 1%; position: sticky; bottom:15%">
                            <div>
                                <input type="button" onclick="document.getElementById('dialog').style.display='none'"
                                        style="float: right" value="X"></input>
                            </div>
                            <div>
                            <textarea id="details" style="font-size: 9pt" rows="10" cols="40" white-space: pre-wrap;>
                                    </textarea>
                            </div>
                        </div>

                        <input style="margin-left: 50%" class="btn btn-lg btn-info" type="submit" name="action" value="Save as Draft"><br><br>
                        <input style="margin-left: 50%" class="btn btn-lg btn-danger" type="submit" name="action" value="Submit Event">

                        <br><br>

                    </div>
                </fieldset>
            </form>
        </div>

        <script>
            $(document).ready(function () {

                $('#id_supervisor').selectize({
                    sortField: 'text'
                });
                $('#id_executor').selectize({
                    sortField: 'text'
                });
            });
        </script>

    </div>


{% endblock %}